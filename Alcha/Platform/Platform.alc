import "Library/Platforms/DE0-Nano-SoC" as DE0;
//------------------------------------------------------------------------------

alias HPS_Pins  = DE0.HPS;
alias LEDs      = DE0.LEDs;
alias DipSwitch = DE0.Switches;
//------------------------------------------------------------------------------

group Synth{ // ADF4159
  group SPI{
    alias SClk  = DE0.Arduino.IO[0];
    alias Data  = DE0.Arduino.IO[1];
    alias Latch = DE0.Arduino.IO[2];
  }
  alias Trigger = DE0.Arduino.IO[3];
  alias MuxOut  = DE0.Arduino.IO[4];
}
//------------------------------------------------------------------------------

group ADC{ // ADS7056
  alias nCS  = DE0.Arduino.IO[5];
  alias SClk = DE0.Arduino.IO[6];
  alias Data = DE0.Arduino.IO[7];

  !! Assign the PCB-specific timing parameters
}
//------------------------------------------------------------------------------

alias TxEnable = DE0.Arduino.IO[8];
//------------------------------------------------------------------------------

net(5) Debug;
DE0.Arduino.IO[ 9] = Debug[0];
DE0.Arduino.IO[10] = Debug[1];
DE0.Arduino.IO[11] = Debug[2];
DE0.Arduino.IO[12] = Debug[3];
DE0.Arduino.IO[13] = Debug[4];
//------------------------------------------------------------------------------

group I2C{ // LTC2991
  alias SClk = DE0.Arduino.IO[15];
  alias Data = DE0.Arduino.IO[14];

  SClk'pullup = true;
  SClk.driver = 0;
  SClk.enable = 0;

  Data'pullup = true;
  Data.driver = 0;
  Data.enable = 0;
}
//------------------------------------------------------------------------------

net ResetKey = ~DE0.Keys[0];
//------------------------------------------------------------------------------

import "Library/Clocking_and_Reset/PLL_CycloneV";

PLL_CycloneV(DE0.Clock1, ResetKey, [120, 2.5]) PLL;
alias DspClock     = PLL.Output[0];
alias ControlClock = PLL.Output[1];
//------------------------------------------------------------------------------

import "Library/Clocking_and_Reset/DelayedReset";

net HPS_Reset      = DelayedReset(ControlClock, ResetKey | ~PLL.Locked, 1);
net HPS_FPGA_Reset = 0; // Assigned by SystemController
net MasterReset    = DelayedReset(ControlClock, HPS_FPGA_Reset | ResetKey | ~PLL.Locked, 100);
//------------------------------------------------------------------------------

